{"version":3,"file":"../../js/universe.js","names":["document","addEventListener","canvasEl","createElement","starryNight","width","height","starCount","context","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","starSpeed","canvas","getElementById","first","cometColor","stars","setCanvasSize","innerWidth","innerHeight","setAttribute","animate","clearRect","i","length","star","move","fadeIn","fadeOut","draw","Star","this","reset","giant","getRandomInt","comet","x","getRandom","y","r","dx","dy","fadingOut","fadingIn","opacity","opacityTresh","do","beginPath","fillStyle","arc","Math","PI","rect","fill","closePath","setTimeout","max","floor","random","min","getContext","loop","id","body","appendChild"],"sources":["js/universe.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const canvasEl = document.createElement('canvas');\n  canvasEl.id = 'universe';\n  document.body.appendChild(canvasEl);\n\n  document.addEventListener('pjax:complete', () => {\n    if (!document.getElementById('universe')) {\n      const canvasEl = document.createElement('canvas');\n      canvasEl.id = 'universe';\n      document.body.appendChild(canvasEl);\n      starryNight();\n    }\n  });\n  function starryNight() {\n    window.requestAnimationFrame = window.requestAnimationFrame\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame\n        || window.msRequestAnimationFrame;\n\n    let width;\n    let height;\n    let starCount;\n    let context;\n    const starSpeed = 0.05;\n    const canvas = document.getElementById(\"universe\");\n    const first = true;\n\n    const giantColor = \"180,184,240\";\n    const starColor = \"226,225,142\";\n    const cometColor = \"226,225,224\";\n\n    const stars = [];\n\n    function setCanvasSize() {\n      width = window.innerWidth;\n      height = window.innerHeight;\n      starCount = width * 0.216;\n      canvas.setAttribute(\"width\", width);\n      canvas.setAttribute(\"height\", height);\n    }\n\n    function animate() {\n      context.clearRect(0, 0, width, height);\n      for (let i = 0; i < stars.length; i++) {\n        const star = stars[i];\n        star.move();\n        star.fadeIn();\n        star.fadeOut();\n        star.draw();\n      }\n    }\n\n    function Star() {\n      this.reset = function() {\n        this.giant = getRandomInt(3);\n        this.comet = !this.giant && !first && getRandomInt(10);\n        this.x = getRandom(0, width - 10);\n        this.y = getRandom(0, height);\n        this.r = getRandom(1.1, 2.6);\n        this.dx = getRandom(starSpeed, starSpeed * 6) + (this.comet + 1 - 1) * starSpeed * getRandom(50, 120) + starSpeed * 2;\n        this.dy = -getRandom(starSpeed, starSpeed * 6) - (this.comet + 1 - 1) * starSpeed * getRandom(50, 120);\n        this.fadingOut = null;\n        this.fadingIn = true;\n        this.opacity = 0;\n        this.opacityTresh = getRandom(0.2, 1 - (this.comet + 1 - 1) * 0.4);\n        this.do = getRandom(0.0005, 0.002) + 0.001 * (this.comet + 1 - 1);\n      };\n\n      this.fadeIn = function() {\n        if (this.fadingIn) {\n          this.fadingIn = !(this.opacity > this.opacityTresh);\n          this.opacity += this.do;\n        }\n      };\n\n      this.fadeOut = function() {\n        if (this.fadingOut) {\n          this.fadingOut = !(this.opacity < 0);\n          this.opacity -= this.do / 2;\n          if (this.x > width || this.y < 0) {\n            this.fadingOut = false;\n            this.reset();\n          }\n        }\n      };\n\n      this.draw = function() {\n        context.beginPath();\n\n        if (this.giant) {\n          context.fillStyle = \"rgba(\" + giantColor + \",\" + this.opacity + \")\";\n          context.arc(this.x, this.y, 2, 0, 2 * Math.PI, false);\n        }\n        else if (this.comet) {\n          context.fillStyle = \"rgba(\" + cometColor + \",\" + this.opacity + \")\";\n          context.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, false);\n\n          for (let i = 0; i < 30; i++) {\n            context.fillStyle = \"rgba(\" + cometColor + \",\" + (this.opacity - (this.opacity / 20) * i) + \")\";\n            context.rect(this.x - this.dx / 4 * i, this.y - this.dy / 4 * i - 2, 2, 2);\n            context.fill();\n          }\n        }\n        else {\n          context.fillStyle = \"rgba(\" + starColor + \",\" + this.opacity + \")\";\n          context.rect(this.x, this.y, this.r, this.r);\n        }\n\n        context.closePath();\n        context.fill();\n      };\n\n      this.move = function() {\n        this.x += this.dx;\n        this.y += this.dy;\n        if (this.fadingOut === false) {\n          this.reset();\n        }\n        if (this.x > width - width / 4 || this.y < 0) {\n          this.fadingOut = true;\n        }\n      };\n\n      setTimeout(function() {\n        first = false;\n      }, 50);\n    }\n\n    function getRandomInt(max) {\n      return Math.floor(Math.random() * 1000) + 1 < max * 10;\n    }\n\n    function getRandom(min, max) {\n      return Math.random() * (max - min) + min;\n    }\n\n    setCanvasSize();\n    window.addEventListener(\"resize\", setCanvasSize, false);\n\n    context = canvas.getContext(\"2d\");\n    for (let i = 0; i < starCount; i++) {\n      stars[i] = new Star();\n      stars[i].reset();\n    }\n    animate();\n\n    function loop() {\n      animate();\n      window.requestAnimationFrame(loop);\n    }\n    loop();\n  }\n\n  starryNight();\n});\n\n"]}