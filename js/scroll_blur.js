class HeaderTransition{constructor(i={}){this.options={headerId:"page-header",bgId:"web_bg",maxBlur:50,minOpacity:.8,transitionDuration:300,...i},this.header=null,this.webBg=null,this.initialized=!1,this.init()}init(){this.initialized||(this.header=document.getElementById(this.options.headerId),this.webBg=document.getElementById(this.options.bgId),this.header?(this.addTransitionStyles(),this.handleScroll=this.handleScroll.bind(this),window.addEventListener("scroll",this.handleScroll,{passive:!0}),this.initialized=!0,this.handleScroll()):console.warn(`Header element with id "${this.options.headerId}" not found`))}addTransitionStyles(){const i=document.createElement("style");i.textContent=`\n      #${this.options.headerId} .pl-container {\n        will-change: transform, filter, opacity;\n        transition: filter ${this.options.transitionDuration}ms ease-out,\n                   opacity ${this.options.transitionDuration}ms ease-out;\n      }\n      \n      #${this.options.bgId} {\n        transition: filter ${this.options.transitionDuration}ms ease-out,\n                   opacity ${this.options.transitionDuration}ms ease-out;\n      }\n    `,document.head.appendChild(i)}handleScroll(){if(!this.header)return;const i=this.header.offsetHeight,t=window.pageYOffset||document.documentElement.scrollTop,e=Math.min(t/i,1),n=Math.min(e*this.options.maxBlur,this.options.maxBlur),s=1-e,o=this.header.querySelector(".pl-container");if(o&&(o.style.filter=`blur(${n}px)`,o.style.opacity=s),this.webBg){this.webBg.style.filter=`blur(${n}px)`;let i=s;i<this.options.minOpacity&&(i=this.options.minOpacity),this.webBg.style.opacity=i}}destroy(){this.initialized&&(window.removeEventListener("scroll",this.handleScroll),this.initialized=!1,this.header=null,this.webBg=null)}refresh(){this.destroy(),this.init()}}const defaultConfig={headerId:"page-header",bgId:"web_bg",maxBlur:50,minOpacity:.8,transitionDuration:400};let headerTransition=null;function initHeaderTransition(i={}){headerTransition&&headerTransition.destroy(),headerTransition=new HeaderTransition({...defaultConfig,...i})}document.addEventListener("DOMContentLoaded",(()=>{initHeaderTransition()})),document.addEventListener("pjax:complete",(()=>{headerTransition?headerTransition.refresh():initHeaderTransition()})),window.HeaderTransition=HeaderTransition,window.initHeaderTransition=initHeaderTransition;
//# sourceMappingURL=../maps/js/scroll_blur.js.map
